<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>Common output options for automata</title>
<!-- 2018-01-20 Sat 14:21 -->
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="root" />
<meta  name="description" content="Options for input and output of ω-automata in Spot's command-line tools"
 />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center; }
  .todo   { font-family: monospace; color: red; }
  .done   { color: green; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.right  { text-align: center;  }
  th.left   { text-align: center;   }
  th.center { text-align: center; }
  td.right  { text-align: right;  }
  td.left   { text-align: left;   }
  td.center { text-align: center; }
  dt { font-weight: bold; }
  .footpara:nth-child(2) { display: inline; }
  .footpara { display: block; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" type="text/css" href="spot.css" />
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
<script type="text/javascript" src="http://orgmode.org/mathjax/MathJax.js"></script>
<script type="text/javascript">
<!--/*--><![CDATA[/*><!--*/
    MathJax.Hub.Config({
        // Only one of the two following lines, depending on user settings
        // First allows browser-native MathML display, second forces HTML/CSS
        //  config: ["MMLorHTML.js"], jax: ["input/TeX"],
            jax: ["input/TeX", "output/HTML-CSS"],
        extensions: ["tex2jax.js","TeX/AMSmath.js","TeX/AMSsymbols.js",
                     "TeX/noUndefined.js"],
        tex2jax: {
            inlineMath: [ ["\\(","\\)"] ],
            displayMath: [ ['$$','$$'], ["\\[","\\]"], ["\\begin{displaymath}","\\end{displaymath}"] ],
            skipTags: ["script","noscript","style","textarea","pre","code"],
            ignoreClass: "tex2jax_ignore",
            processEscapes: false,
            processEnvironments: true,
            preview: "TeX"
        },
        showProcessingMessages: true,
        displayAlign: "center",
        displayIndent: "2em",

        "HTML-CSS": {
             scale: 100,
             availableFonts: ["STIX","TeX"],
             preferredFont: "TeX",
             webFont: "TeX",
             imageFont: "TeX",
             showMathMenu: true,
        },
        MMLorHTML: {
             prefer: {
                 MSIE:    "MML",
                 Firefox: "MML",
                 Opera:   "HTML",
                 other:   "HTML"
             }
        }
    });
/*]]>*///-->
</script>
</head>
<body>
<div id="org-div-home-and-up">
 <a accesskey="h" href="tools.html"> UP </a>
 |
 <a accesskey="H" href="index.html"> HOME </a>
</div><div id="content">
<h1 class="title">Common output options for automata</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">Common output options</a></li>
<li><a href="#sec-2">HOA output</a></li>
<li><a href="#sec-3">LBTT output</a></li>
<li><a href="#sec-4">Spin output</a></li>
<li><a href="#sec-5">Dot output</a>
<ul>
<li><a href="#sec-5-1">Converting dot output to images or pdf</a></li>
<li><a href="#sec-5-2">Customizing the dot output</a></li>
<li><a href="#dot2tex">Working with <code>dot2tex</code></a></li>
</ul>
</li>
<li><a href="#stats">Statistics</a></li>
<li><a href="#timing">Timing</a></li>
<li><a href="#sec-8">Naming automata</a></li>
<li><a href="#sec-9">Naming output</a></li>
</ul>
</div>
</div>
<p>
Spot supports different output syntaxes for automata.  This page
documents the options, common to all tools where it makes sense, that
are used to specify how to output of automata.
</p>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1">Common output options</h2>
<div class="outline-text-2" id="text-1">
<p>
All tools that can output automata implement the following options:
</p>

<pre class="example">
-8, --utf8                 enable UTF-8 characters in output (ignored with
                           --lbtt or --spin)
    --check[=PROP]         test for the additional property PROP and output
                           the result in the HOA format (implies -H).  PROP
                           may be any prefix of 'all' (default),
                           'unambiguous', 'stutter-invariant', or
                           'strength'.
-d, --dot[=1|a|A|b|B|c|C(COLOR)|e|f(FONT)|h|k|n|N|o|r|R|s|t|v|y|+INT|&lt;INT|#]
                           GraphViz's format.  Add letters for (1) force
                           numbered states, (a) show acceptance condition,
                           (A) hide acceptance condition, (b) acceptance sets
                           as bullets, (B) bullets except for
                           Büchi/co-Büchi automata, (c) force circular
                           nodes, (C) color nodes with COLOR, (d) show
                           origins when known, (e) force elliptic nodes,
                           (f(FONT)) use FONT, (h) horizontal layout, (k) use
                           state labels when possible, (n) show name, (N)
                           hide name, (o) ordered transitions, (r) rainbow
                           colors for acceptance sets, (R) color acceptance
                           sets by Inf/Fin, (s) with SCCs, (t) force
                           transition-based acceptance, (v) vertical layout,
                           (y) split universal edges by color, (+INT) add INT
                           to all set numbers, (&lt;INT) display at most INT
                           states, (#) show internal edge numbers
-H, --hoaf[=1.1|i|k|l|m|s|t|v]   Output the automaton in HOA format
                           (default).  Add letters to select (1.1) version
                           1.1 of the format, (i) use implicit labels for
                           complete deterministic automata, (s) prefer
                           state-based acceptance when possible [default],
                           (t) force transition-based acceptance, (m) mix
                           state and transition-based acceptance, (k) use
                           state labels when possible, (l) single-line
                           output, (v) verbose properties
    --lbtt[=t]             LBTT's format (add =t to force transition-based
                           acceptance even on Büchi automata)
    --name=FORMAT          set the name of the output automaton
-o, --output=FORMAT        send output to a file named FORMAT instead of
                           standard output.  The first automaton sent to a
                           file truncates it unless FORMAT starts with '&gt;&gt;'.
-q, --quiet                suppress all normal output
-s, --spin[=6|c]           Spin neverclaim (implies --ba).  Add letters to
                           select (6) Spin's 6.2.4 style, (c) comments on
                           states
    --stats=FORMAT, --format=FORMAT
                           output statistics about the automaton
</pre>

<p>
The main three output formats (that can also been used as input to
some of the tools) are <a href="http://adl.github.io/hoaf/">HOA</a> (used by default, or with <code>-H</code> or
<code>--hoaf</code>), <a href="http://www.tcs.hut.fi/Software/lbtt/doc/html/Format-for-automata.html">LBTT</a> (activated by <code>--lbtt</code>), or Spin <a href="http://spinroot.com/spin/Man/never.html">never claims</a>
(activated by <code>-s</code> or <code>--spin</code>).  These three formats also support
<b>streaming</b>, i.e., you can concatenate multiple automata (and even mix
these three formats in the same stream), and the tools will be able to
read and process them in sequence.
</p>

<p>
The other possible outputs are <a href="http://www.graphviz.org/">GraphViz</a> output (<code>-d</code> or <code>--dot</code>),
various statistics (<code>--stats</code>), or nothing at all (<code>--quiet</code>).  It may
seem strange to ask a tool to not output anything, but it makes sense
when only the exit status matters (for instance using <a href="autfilt.html"><code>autfilt</code></a> to
check whether an input automaton has some property) or for timing
purposes.
</p>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2">HOA output</h2>
<div class="outline-text-2" id="text-2">
<p>
Details about supported features of the HOA format can be found on a
<a href="hoa.html">separate page</a>.
</p>

<p>
The <a href="http://adl.github.io/hoaf/">HOA</a> output should be the preferred format to use if you want to
pass automata between different tools.  Since Spot 1.99.7, it is the
default output format, but you can explicitely request it using the
<code>-H</code> parameter and this allows passing additional options to the HOA
printer.
</p>

<p>
Here is an example where <a href="ltl2tgba.html"><code>ltl2tgba</code></a> is used to construct two automata:
one for <code>a U b</code> and one for <code>(Ga -&gt; Gb) W c</code>.
</p>

<div class="org-src-container">

<pre class="src src-sh">ltl2tgba <span class="org-string">'a U b'</span> <span class="org-string">'(Ga -&gt; Gb) W c'</span>
</pre>
</div>
<div class="org-src-container">

<pre class="src src-hoa"><span class="org-hoa-header-uppercase">HOA:</span> v1
<span class="org-hoa-header-lowercase">name:</span> <span class="org-string">"a U b"</span>
<span class="org-hoa-header-uppercase">States:</span> 2
<span class="org-hoa-header-uppercase">Start:</span> 1
<span class="org-hoa-header-uppercase">AP:</span> 2 <span class="org-string">"a"</span> <span class="org-string">"b"</span>
<span class="org-hoa-header-lowercase">acc-name:</span> Buchi
<span class="org-hoa-header-uppercase">Acceptance:</span> 1 <span class="org-hoa-builtin">Inf</span>(<span class="org-hoa-acceptance-set">0</span>)
<span class="org-hoa-header-lowercase">properties:</span> trans-labels explicit-labels state-acc deterministic
<span class="org-hoa-header-lowercase">properties:</span> stutter-invariant terminal
<span class="org-hoa-keyword">--BODY--</span>
<span class="org-hoa-header-uppercase">State:</span> 0 {<span class="org-hoa-acceptance-set">0</span>}
[<span class="org-hoa-builtin">t</span>] 0
<span class="org-hoa-header-uppercase">State:</span> 1
[<span class="org-hoa-ap-number">1</span>] 0
[<span class="org-hoa-ap-number">0</span>&amp;!<span class="org-hoa-ap-number">1</span>] 1
<span class="org-hoa-keyword">--END--</span>
<span class="org-hoa-header-uppercase">HOA:</span> v1
<span class="org-hoa-header-lowercase">name:</span> <span class="org-string">"(Gb | F!a) W c"</span>
<span class="org-hoa-header-uppercase">States:</span> 5
<span class="org-hoa-header-uppercase">Start:</span> 0
<span class="org-hoa-header-uppercase">AP:</span> 3 <span class="org-string">"b"</span> <span class="org-string">"a"</span> <span class="org-string">"c"</span>
<span class="org-hoa-header-lowercase">acc-name:</span> Buchi
<span class="org-hoa-header-uppercase">Acceptance:</span> 1 <span class="org-hoa-builtin">Inf</span>(<span class="org-hoa-acceptance-set">0</span>)
<span class="org-hoa-header-lowercase">properties:</span> trans-labels explicit-labels trans-acc stutter-invariant
<span class="org-hoa-keyword">--BODY--</span>
<span class="org-hoa-header-uppercase">State:</span> 0
[!<span class="org-hoa-ap-number">1</span>&amp;!<span class="org-hoa-ap-number">2</span>] 0 {<span class="org-hoa-acceptance-set">0</span>}
[<span class="org-hoa-ap-number">2</span>] 1
[<span class="org-hoa-ap-number">0</span>&amp;<span class="org-hoa-ap-number">1</span>&amp;!<span class="org-hoa-ap-number">2</span>] 2
[<span class="org-hoa-ap-number">1</span>&amp;!<span class="org-hoa-ap-number">2</span>] 3
<span class="org-hoa-header-uppercase">State:</span> 1
[<span class="org-hoa-builtin">t</span>] 1 {<span class="org-hoa-acceptance-set">0</span>}
<span class="org-hoa-header-uppercase">State:</span> 2
[<span class="org-hoa-ap-number">0</span>] 2 {<span class="org-hoa-acceptance-set">0</span>}
<span class="org-hoa-header-uppercase">State:</span> 3
[!<span class="org-hoa-ap-number">1</span>&amp;!<span class="org-hoa-ap-number">2</span>] 0 {<span class="org-hoa-acceptance-set">0</span>}
[!<span class="org-hoa-ap-number">1</span>&amp;<span class="org-hoa-ap-number">2</span>] 1
[<span class="org-hoa-ap-number">1</span>&amp;!<span class="org-hoa-ap-number">2</span>] 3
[<span class="org-hoa-ap-number">1</span>&amp;<span class="org-hoa-ap-number">2</span>] 4
<span class="org-hoa-header-uppercase">State:</span> 4
[!<span class="org-hoa-ap-number">1</span>] 1
[<span class="org-hoa-ap-number">1</span>] 4
<span class="org-hoa-keyword">--END--</span>
</pre>
</div>

<p>
The above output contains two automata, named after the formulas they
represent.  Here is a picture of these two automata:
</p>


<div class="figure">
<p><img src="hoafex.svg" alt="hoafex.svg" />
</p>
</div>

<p>
The <a href="http://adl.github.io/hoaf/">HOA format</a> supports both state and transition-based acceptance.
Although Spot works only with transition-based acceptance, its output
routines default to state-based acceptance whenever possible (this is
the case in the first of these two automata) and use transition-based
acceptance otherwise.  You can change this behavior using <code>-Hs</code> (or
<code>--hoaf=s</code>), <code>-Ht</code>, or <code>-Hm</code>.  Option <code>s</code> corresponds to the default
to use state-based acceptance whenever possible.  Option <code>t</code> forces
transition-based acceptance.  For instance compare this output to the
previous one:
</p>

<div class="org-src-container">

<pre class="src src-sh">ltl2tgba -Ht <span class="org-string">'a U b'</span>
</pre>
</div>
<div class="org-src-container">

<pre class="src src-hoa"><span class="org-hoa-header-uppercase">HOA:</span> v1
<span class="org-hoa-header-lowercase">name:</span> <span class="org-string">"a U b"</span>
<span class="org-hoa-header-uppercase">States:</span> 2
<span class="org-hoa-header-uppercase">Start:</span> 1
<span class="org-hoa-header-uppercase">AP:</span> 2 <span class="org-string">"a"</span> <span class="org-string">"b"</span>
<span class="org-hoa-header-lowercase">acc-name:</span> Buchi
<span class="org-hoa-header-uppercase">Acceptance:</span> 1 <span class="org-hoa-builtin">Inf</span>(<span class="org-hoa-acceptance-set">0</span>)
<span class="org-hoa-header-lowercase">properties:</span> trans-labels explicit-labels trans-acc deterministic
<span class="org-hoa-header-lowercase">properties:</span> stutter-invariant terminal
<span class="org-hoa-keyword">--BODY--</span>
<span class="org-hoa-header-uppercase">State:</span> 0
[<span class="org-hoa-builtin">t</span>] 0 {<span class="org-hoa-acceptance-set">0</span>}
<span class="org-hoa-header-uppercase">State:</span> 1
[<span class="org-hoa-ap-number">1</span>] 0
[<span class="org-hoa-ap-number">0</span>&amp;!<span class="org-hoa-ap-number">1</span>] 1
<span class="org-hoa-keyword">--END--</span>
</pre>
</div>

<p>
Option <code>m</code> uses mixed acceptance, i.e, some states might use
state-based acceptance while other will not:
</p>

<div class="org-src-container">

<pre class="src src-sh">ltl2tgba -Hm <span class="org-string">'(Ga -&gt; Gb) W c'</span>
</pre>
</div>
<div class="org-src-container">

<pre class="src src-hoa"><span class="org-hoa-header-uppercase">HOA:</span> v1
<span class="org-hoa-header-lowercase">name:</span> <span class="org-string">"(Gb | F!a) W c"</span>
<span class="org-hoa-header-uppercase">States:</span> 5
<span class="org-hoa-header-uppercase">Start:</span> 0
<span class="org-hoa-header-uppercase">AP:</span> 3 <span class="org-string">"b"</span> <span class="org-string">"a"</span> <span class="org-string">"c"</span>
<span class="org-hoa-header-lowercase">acc-name:</span> Buchi
<span class="org-hoa-header-uppercase">Acceptance:</span> 1 <span class="org-hoa-builtin">Inf</span>(<span class="org-hoa-acceptance-set">0</span>)
<span class="org-hoa-header-lowercase">properties:</span> trans-labels explicit-labels stutter-invariant
<span class="org-hoa-keyword">--BODY--</span>
<span class="org-hoa-header-uppercase">State:</span> 0
[!<span class="org-hoa-ap-number">1</span>&amp;!<span class="org-hoa-ap-number">2</span>] 0 {<span class="org-hoa-acceptance-set">0</span>}
[<span class="org-hoa-ap-number">2</span>] 1
[<span class="org-hoa-ap-number">0</span>&amp;<span class="org-hoa-ap-number">1</span>&amp;!<span class="org-hoa-ap-number">2</span>] 2
[<span class="org-hoa-ap-number">1</span>&amp;!<span class="org-hoa-ap-number">2</span>] 3
<span class="org-hoa-header-uppercase">State:</span> 1 {<span class="org-hoa-acceptance-set">0</span>}
[<span class="org-hoa-builtin">t</span>] 1
<span class="org-hoa-header-uppercase">State:</span> 2 {<span class="org-hoa-acceptance-set">0</span>}
[<span class="org-hoa-ap-number">0</span>] 2
<span class="org-hoa-header-uppercase">State:</span> 3
[!<span class="org-hoa-ap-number">1</span>&amp;!<span class="org-hoa-ap-number">2</span>] 0 {<span class="org-hoa-acceptance-set">0</span>}
[!<span class="org-hoa-ap-number">1</span>&amp;<span class="org-hoa-ap-number">2</span>] 1
[<span class="org-hoa-ap-number">1</span>&amp;!<span class="org-hoa-ap-number">2</span>] 3
[<span class="org-hoa-ap-number">1</span>&amp;<span class="org-hoa-ap-number">2</span>] 4
<span class="org-hoa-header-uppercase">State:</span> 4
[!<span class="org-hoa-ap-number">1</span>] 1
[<span class="org-hoa-ap-number">1</span>] 4
<span class="org-hoa-keyword">--END--</span>
</pre>
</div>


<p>
It is also possible to output each automaton on a single line, in case
the result should be used with line-based tools or embedded into a CSV
file&#x2026;  Here is an example using both transition-based acceptance,
and single-line output:
</p>

<div class="org-src-container">

<pre class="src src-sh">ltl2tgba -Htl <span class="org-string">'a U b'</span> <span class="org-string">'(Ga -&gt; Gb) W c'</span>
</pre>
</div>
<div class="org-src-container">

<pre class="src src-hoa"><span class="org-hoa-header-uppercase">HOA:</span> v1 <span class="org-hoa-header-lowercase">name:</span> <span class="org-string">"a U b"</span> <span class="org-hoa-header-uppercase">States:</span> 2 <span class="org-hoa-header-uppercase">Start:</span> 1 <span class="org-hoa-header-uppercase">AP:</span> 2 <span class="org-string">"a"</span> <span class="org-string">"b"</span> <span class="org-hoa-header-lowercase">acc-name:</span> Buchi <span class="org-hoa-header-uppercase">Acceptance:</span> 1 <span class="org-hoa-builtin">Inf</span>(<span class="org-hoa-acceptance-set">0</span>) <span class="org-hoa-header-lowercase">properties:</span> trans-labels explicit-labels trans-acc deterministic stutter-invariant terminal <span class="org-hoa-keyword">--BODY--</span> <span class="org-hoa-header-uppercase">State:</span> 0 [<span class="org-hoa-builtin">t</span>] 0 {<span class="org-hoa-acceptance-set">0</span>} <span class="org-hoa-header-uppercase">State:</span> 1 [<span class="org-hoa-ap-number">1</span>] 0 [<span class="org-hoa-ap-number">0</span>&amp;!<span class="org-hoa-ap-number">1</span>] 1 <span class="org-hoa-keyword">--END--</span>
<span class="org-hoa-header-uppercase">HOA:</span> v1 <span class="org-hoa-header-lowercase">name:</span> <span class="org-string">"(Gb | F!a) W c"</span> <span class="org-hoa-header-uppercase">States:</span> 5 <span class="org-hoa-header-uppercase">Start:</span> 0 <span class="org-hoa-header-uppercase">AP:</span> 3 <span class="org-string">"b"</span> <span class="org-string">"a"</span> <span class="org-string">"c"</span> <span class="org-hoa-header-lowercase">acc-name:</span> Buchi <span class="org-hoa-header-uppercase">Acceptance:</span> 1 <span class="org-hoa-builtin">Inf</span>(<span class="org-hoa-acceptance-set">0</span>) <span class="org-hoa-header-lowercase">properties:</span> trans-labels explicit-labels trans-acc stutter-invariant <span class="org-hoa-keyword">--BODY--</span> <span class="org-hoa-header-uppercase">State:</span> 0 [!<span class="org-hoa-ap-number">1</span>&amp;!<span class="org-hoa-ap-number">2</span>] 0 {<span class="org-hoa-acceptance-set">0</span>} [<span class="org-hoa-ap-number">2</span>] 1 [<span class="org-hoa-ap-number">0</span>&amp;<span class="org-hoa-ap-number">1</span>&amp;!<span class="org-hoa-ap-number">2</span>] 2 [<span class="org-hoa-ap-number">1</span>&amp;!<span class="org-hoa-ap-number">2</span>] 3 <span class="org-hoa-header-uppercase">State:</span> 1 [<span class="org-hoa-builtin">t</span>] 1 {<span class="org-hoa-acceptance-set">0</span>} <span class="org-hoa-header-uppercase">State:</span> 2 [<span class="org-hoa-ap-number">0</span>] 2 {<span class="org-hoa-acceptance-set">0</span>} <span class="org-hoa-header-uppercase">State:</span> 3 [!<span class="org-hoa-ap-number">1</span>&amp;!<span class="org-hoa-ap-number">2</span>] 0 {<span class="org-hoa-acceptance-set">0</span>} [!<span class="org-hoa-ap-number">1</span>&amp;<span class="org-hoa-ap-number">2</span>] 1 [<span class="org-hoa-ap-number">1</span>&amp;!<span class="org-hoa-ap-number">2</span>] 3 [<span class="org-hoa-ap-number">1</span>&amp;<span class="org-hoa-ap-number">2</span>] 4 <span class="org-hoa-header-uppercase">State:</span> 4 [!<span class="org-hoa-ap-number">1</span>] 1 [<span class="org-hoa-ap-number">1</span>] 4 <span class="org-hoa-keyword">--END--</span>
</pre>
</div>

<p>
Finally, version 1.1 of the HOA format can be specified using the
<code>-H1.1</code> option.  Version 1, which is currently the default, can also
be requested explicitly using <code>-H1</code>.  The main advantage of version
1.1, as far as Spot is concerned, is that some of negated properties
can be transmitted.  For instance, compare
</p>

<div class="org-src-container">

<pre class="src src-sh">ltl2tgba -f GFa -f FGa -H1 --check | grep -E <span class="org-string">'^(HOA|properties|name):'</span>
</pre>
</div>

<div class="org-src-container">

<pre class="src src-hoa"><span class="org-hoa-header-uppercase">HOA:</span> v1
<span class="org-hoa-header-lowercase">name:</span> <span class="org-string">"GFa"</span>
<span class="org-hoa-header-lowercase">properties:</span> trans-labels explicit-labels trans-acc complete
<span class="org-hoa-header-lowercase">properties:</span> deterministic stutter-invariant
<span class="org-hoa-header-uppercase">HOA:</span> v1
<span class="org-hoa-header-lowercase">name:</span> <span class="org-string">"FGa"</span>
<span class="org-hoa-header-lowercase">properties:</span> trans-labels explicit-labels state-acc semi-deterministic
<span class="org-hoa-header-lowercase">properties:</span> stutter-invariant very-weak
</pre>
</div>

<p>
versus
</p>

<div class="org-src-container">

<pre class="src src-sh">ltl2tgba -f GFa -f FGa -H1.1 --check | grep -E <span class="org-string">'^(HOA|properties|name):'</span>
</pre>
</div>

<div class="org-src-container">

<pre class="src src-hoa"><span class="org-hoa-header-uppercase">HOA:</span> v1.1
<span class="org-hoa-header-lowercase">name:</span> <span class="org-string">"GFa"</span>
<span class="org-hoa-header-lowercase">properties:</span> trans-labels explicit-labels trans-acc complete
<span class="org-hoa-header-lowercase">properties:</span> deterministic stutter-invariant !inherently-weak
<span class="org-hoa-header-uppercase">HOA:</span> v1.1
<span class="org-hoa-header-lowercase">name:</span> <span class="org-string">"FGa"</span>
<span class="org-hoa-header-lowercase">properties:</span> trans-labels explicit-labels state-acc !complete
<span class="org-hoa-header-lowercase">properties:</span> !deterministic exist-branch !unambiguous semi-deterministic
<span class="org-hoa-header-lowercase">properties:</span> stutter-invariant very-weak !terminal
</pre>
</div>

<p>
The <code>--check</code> option inspects the automata for additional properties
such that their strength or whether they are stutter-invariant and
unambiguous.  You can see in this example that version 1.1 of the
format carries additional negated properties that could not be
represented in the first version.
</p>
</div>
</div>

<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3">LBTT output</h2>
<div class="outline-text-2" id="text-3">
<p>
The <a href="http://www.tcs.hut.fi/Software/lbtt/doc/html/Format-for-automata.html">LBTT</a> output has two flavors: state-based (which is used to output
Büchi automata or monitors) or transition-based (for TGBA).
</p>

<div class="org-src-container">

<pre class="src src-sh">ltl2tgba --ba --lbtt <span class="org-string">'p0 U p1'</span>
</pre>
</div>
<pre class="example">
2 1
0 1 -1
1 p1
0 &amp; p0 ! p1
-1
1 0 0 -1
1 t
-1
</pre>

<p>
If you want to request transition-based output even for Büchi automata,
use <code>--lbtt=t</code>.
</p>

<div class="org-src-container">

<pre class="src src-sh">ltl2tgba --ba --lbtt=t <span class="org-string">'p0 U p1'</span>
</pre>
</div>

<pre class="example">
2 1t
0 1
1 -1 p1
0 -1 &amp; p0 ! p1
-1
1 0
1 0 -1 t
-1
</pre>

<p>
Note that the <a href="http://www.tcs.hut.fi/Software/lbtt/doc/html/Format-for-automata.html">LBTT</a> output generalizes the format output by <a href="http://www.tcs.hut.fi/Software/maria/tools/lbt/">LBT</a> with
support for transition-based acceptance.  Both formats however are
restricted to atomic propositions of the form <code>p0</code>, <code>p1</code>, etc&#x2026;  In
case other atomic propositions are used, Spot output them in double
quotes.  This other extension of the format is also supported by
<a href="http://www.ltl2dstar.de/">ltl2dstar</a>.
</p>

<div class="org-src-container">

<pre class="src src-sh">ltl2tgba --ba --lbtt <span class="org-string">'a U b'</span>
</pre>
</div>

<pre class="example">
2 1
0 1 -1
1 "b"
0 &amp; "a" ! "b"
-1
1 0 0 -1
1 t
-1
</pre>
</div>
</div>

<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4">Spin output</h2>
<div class="outline-text-2" id="text-4">
<p>
Spin <a href="http://spinroot.com/spin/Man/never.html">never claims</a> can be requested using <code>-s</code> or <code>--spin</code>.  They can only
represent Büchi automata, so these options imply <code>--ba</code>.
</p>

<div class="org-src-container">

<pre class="src src-sh">ltl2tgba -s <span class="org-string">'a U b'</span>
</pre>
</div>

<pre class="example">
never { /* a U b */
T0_init:
  if
  :: (b) -&gt; goto accept_all
  :: ((a) &amp;&amp; (!(b))) -&gt; goto T0_init
  fi;
accept_all:
  skip
}
</pre>

<p>
Recent versions of Spin (starting with Spin 6.2.4) output never claims
in a slightly different style that can be requested using either
<code>-s6</code> or <code>--spin=6</code>:
</p>

<div class="org-src-container">

<pre class="src src-sh">ltl2tgba -s6 <span class="org-string">'a U b'</span>
</pre>
</div>

<pre class="example">
never { /* a U b */
T0_init:
  do
  :: atomic { (b) -&gt; assert(!(b)) }
  :: ((a) &amp;&amp; (!(b))) -&gt; goto T0_init
  od;
accept_all:
  skip
}
</pre>

<p>
(Note that while Spot is able to read never claims that follow any of
these two styles, it is not capable of interpreting an arbitrary piece
of Promela syntax.)
</p>
</div>
</div>

<div id="outline-container-sec-5" class="outline-2">
<h2 id="sec-5">Dot output</h2>
<div class="outline-text-2" id="text-5">
<p>
The <code>-d</code> or <code>--dot</code> option causes automata to be output in GraphViz's
format.
</p>

<div class="org-src-container">

<pre class="src src-sh">ltl2tgba <span class="org-string">'(Ga -&gt; Gb) W c'</span> -d
</pre>
</div>

<pre class="example">
digraph G {
  rankdir=LR
  node [shape="circle"]
  I [label="", style=invis, width=0]
  I -&gt; 0
  0 [label="0"]
  0 -&gt; 0 [label="!a &amp; !c\n{0}"]
  0 -&gt; 1 [label="c"]
  0 -&gt; 2 [label="a &amp; b &amp; !c"]
  0 -&gt; 3 [label="a &amp; !c"]
  1 [label="1"]
  1 -&gt; 1 [label="1\n{0}"]
  2 [label="2"]
  2 -&gt; 2 [label="b\n{0}"]
  3 [label="3"]
  3 -&gt; 0 [label="!a &amp; !c\n{0}"]
  3 -&gt; 1 [label="!a &amp; c"]
  3 -&gt; 3 [label="a &amp; !c"]
  3 -&gt; 4 [label="a &amp; c"]
  4 [label="4"]
  4 -&gt; 1 [label="!a"]
  4 -&gt; 4 [label="a"]
}
</pre>
</div>

<div id="outline-container-sec-5-1" class="outline-3">
<h3 id="sec-5-1">Converting dot output to images or pdf</h3>
<div class="outline-text-3" id="text-5-1">
<p>
This output should be processed with <code>dot</code> to be converted into a
picture.  For instance use <code>dot -Tpng</code> or <code>dot -Tpdf</code>.  The pictures
on this page are produced with <code>dot -Tsvg</code>.
</p>


<div class="figure">
<p><img src="oaut-dot1.svg" alt="oaut-dot1.svg" />
</p>
</div>
</div>
</div>

<div id="outline-container-sec-5-2" class="outline-3">
<h3 id="sec-5-2">Customizing the dot output</h3>
<div class="outline-text-3" id="text-5-2">
<p>
This output can be customized by passing optional characters to the
<code>--dot</code> option.  For instance <code>v</code> requests a vertical layout (instead
of the default horizontal layout), <code>c</code> requests circle states, <code>s</code>
causes strongly-connected components to be displayed, <code>n</code> causes the
name (see below) of the automaton to be displayed, and <code>a</code> causes the
acceptance condition to be shown as well.  Option <code>b</code> causes sets to
be ouput as bullets (e.g., ⓿ instead of <code>{0}</code>); option <code>r</code> (for
rainbow) causes sets to be displayed in different colors, while option
<code>R</code> also uses colors, but it chooses them depending on whether a set
is used with Fin-acceptance, Inf-acceptance, or both.  Option
<code>C(COLOR)</code> can be used to color all states using <code>COLOR</code>, and the
option <code>f(FONT)</code> is used to select a fontname: it is often necessary
when <code>b</code> is used to ensure the characters ⓿, ❶, etc. are all selected
from the same font.
</p>

<div class="org-src-container">

<pre class="src src-sh">ltl2tgba --dot=vcsna <span class="org-string">'(Ga -&gt; Gb) W c'</span>
</pre>
</div>

<div class="figure">
<p><img src="oaut-dot2.svg" alt="oaut-dot2.svg" />
</p>
</div>

<p>
The acceptance condition is displayed in the same way as in the <a href="http://adl.github.io/hoaf/">HOA
format</a>. Here <code>Inf(0)</code> means that runs are accepting if and only if
they visit some the transitions in the set #0 infinitely often.  For
well known acceptance conditions (as Büchi in this case), their name
is also displayed in bracket below.
</p>

<p>
The strongly connected components are displayed using the following colors:
</p>
<ul class="org-ul">
<li><b>green</b> components contain an accepting cycle
</li>
<li><b>red</b> components contain no accepting cycle
</li>
<li><b>black</b> components are trivial (i.e., they contain no cycle)
</li>
<li><b>gray</b> components are useless (i.e., they are non-accepting, and are only followed by non-accepting components)
</li>
</ul>

<p>
Here is an example involving all colors:
</p>


<div class="figure">
<p><img src="oaut-dot3.svg" alt="oaut-dot3.svg" />
</p>
</div>

<p>
<a id="default-dot" name="default-dot"></a>
</p>

<p>
The dot output can also be customized via two environment variables:
</p>
<ul class="org-ul">
<li><code>SPOT_DOTDEFAULT</code> contains default arguments for the <code>--dot</code> option
(for when it is used implicitly, or used as just <code>--dot</code> without
argument).  For instance after <code>export SPOT_DOTDEFAULT=vcsn</code>, using
<code>--dot</code> is equivalent to <code>--dot=vcsn</code>.  However using <code>--dot=xyz</code>
(for any value of <code>xyz</code>, even empty) will ignore the
<code>SPOT_DOTDEFAULT</code> variable.  If the argument of <code>--dot</code> contains
a dot character, then this dot is replaced by the contents of
<code>SPOT_DOTDEFAULT</code>.  So <code>--dot=.a</code> would be equivalent to <code>--dot=vcsna</code>
with our example definition of <code>SPOT_DOTDEFAULT</code>.
</li>
<li><code>SPOT_DOTEXTRA</code> may contains an arbitrary string that will be emitted
in the dot output before the first state.  This can be used to modify
any attribute.  For instance (except for this page, where we had
do demonstrate the various options of <code>--dot</code>, and a few pages where
we show the <code>--dot</code> output verbatim) all the automata displayed in
this documentation are generated with the following environment
variables set:
</li>
</ul>

<div class="org-src-container">

<pre class="src src-sh"><span class="org-builtin">export</span> <span class="org-variable-name">SPOT_DOTDEFAULT</span>=<span class="org-string">'Brf(Lato)C(#ffffa0)'</span>
<span class="org-builtin">export</span> <span class="org-variable-name">SPOT_DOTEXTRA</span>=<span class="org-string">'edge[arrowhead=vee, arrowsize=.7]'</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-dot2tex" class="outline-3">
<h3 id="dot2tex"><a id="sec-5-3" name="sec-5-3"></a>Working with <code>dot2tex</code></h3>
<div class="outline-text-3" id="text-dot2tex">


<p>
The <a href="https://github.com/kjellmf/dot2tex"><code>dot2tex</code> program</a> interacts with GraphViz to convert dot files
into TeX figures.  The layout is still done by tools provided by
GraphViz (i.e. <code>dot</code>, <code>neato</code>, <code>circo</code>, &#x2026;) but the actual rendering
is done using LaTeX with the TikZ or PSTricks packages.  One advantage
is that this allows embedding math formulas into the graph, something
GraphViz alone cannot do.  Another advantage is that you can then
easily edit the LaTeX figure, for instance to add additional graphical
elements.
</p>

<p>
The <code>dot</code> formater of Spot has an option <code>x</code>, that is convenient to
use with <code>dot2tex</code>.  This option causes labels to be rendered as LaTeX
mathematical formulas instead of ASCII text.
</p>

<div class="org-src-container">

<pre class="src src-sh">ltl2tgba <span class="org-string">'p0 U p1'</span> --dot=x | dot2tex --autosize --nominsize &gt; out.tex
</pre>
</div>

<p>
The above command should give you a LaTeX file that compiles to the
following figure:
</p>


<div class="figure">
<p><img src="dot2tex.svg" alt="dot2tex.svg" />
</p>
</div>

<p>
Here an example with bullets denoting acceptance sets, and SCCs:
</p>

<div class="org-src-container">

<pre class="src src-sh">ltl2tgba -G -D <span class="org-string">'!a &amp; FGa'</span> --dot=sbarx | dot2tex --autosize --nominsize &gt; out.tex
</pre>
</div>


<div class="figure">
<p><img src="dot2tex2.svg" alt="dot2tex2.svg" />
</p>
</div>

<p>
Caveats:
</p>
<ul class="org-ul">
<li><code>dot2tex</code> should be called with option <code>--autosize</code> in order to
compute the size of each label before calling GraphViz to layout the
graph.  This is because GraphViz cannot compute the correct size of
mathematical formulas.  Unfortunately, the release of <code>dot2tex
  2.9.0</code> contains a bug where sizes are intepreted as integers instead
of floats.  This can cause labels or shapes to disappear.  This bug
of <code>dot2tex</code> was fixed in 2014, but at the time of writing
(summer 2017) no new release of <code>dot2tex</code> has been made.  To work around this,
make sure you install <code>dot2tex</code> from its git repository:
<div class="org-src-container">

<pre class="src src-sh">git clone https://github.com/kjellmf/dot2tex.git
<span class="org-builtin">cd</span> dot2tex
sudo python setup.py install
</pre>
</div>
</li>
<li>The default size of nodes seems slightly too big for our usage.
Using <code>--nominsize</code> is just one way around it.  Refer to the
<a href="https://dot2tex.readthedocs.io/en/latest/"><code>dot2tex</code> manual</a> for finer ways to set the node size.
</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-stats" class="outline-2">
<h2 id="stats"><a id="sec-6" name="sec-6"></a>Statistics</h2>
<div class="outline-text-2" id="text-stats">

<p>
The <code>--stats</code> option takes a format string parameter to specify what
and how statistics should be output.
</p>

<p>
Most tools support a common set of statistics about the output
automaton (like <code>%s</code> for the number of states, <code>%t</code> for transitions,
<code>%e</code> for edges, etc.).  Additional statistics might be available
depending on what the tool does (for instance <a href="autfilt.html"><code>autfilt</code></a> also uses
capitaized letters <code>%S</code>, <code>%T</code>, and <code>%E</code> to display the same statistics
about the input automaton).  All the available statistics are
displayed when a tool is run with <code>--help</code>.
</p>

<p>
For instance here are the statistics available in <a href="randaut.html"><code>randaut</code></a>:
</p>

<pre class="example">
%%                         a single %
%a                         number of acceptance sets
%c, %[LETTERS]c            number of SCCs; you may filter the SCCs to count
                           using the following LETTERS, possibly
                           concatenated: (a) accepting, (r) rejecting, (c)
                           complete, (v) trivial, (t) terminal, (w) weak,
                           (iw) inherently weak. Use uppercase letters to
                           negate them.
%d                         1 if the output is deterministic, 0 otherwise
%e                         number of reachable edges
%F                         seed number
%g, %[LETTERS]g            acceptance condition (in HOA syntax); add brackets
                           to print an acceptance name instead and LETTERS to
                           tweak the format: (0) no parameters, (a)
                           accentuated, (b) abbreviated, (d) style used in
                           dot output, (g) no generalized parameter, (l)
                           recognize Street-like and Rabin-like, (m) no main
                           parameter, (p) no parity parameter, (o) name
                           unknown acceptance as 'other', (s) shorthand for
                           'lo0'.
%h                         the automaton in HOA format on a single line (use
                           %[opt]h to specify additional options as in
                           --hoa=opt)
%L                         automaton number
%m                         name of the automaton
%n                         number of nondeterministic states in output
%p                         1 if the output is complete, 0 otherwise
%r                         wall-clock time elapsed in seconds (excluding
                           parsing)
%R, %[LETTERS]R            CPU time (excluding parsing), in seconds; Add
                           LETTERS to restrict to(u) user time, (s) system
                           time, (p) parent process, or (c) children
                           processes.
%s                         number of reachable states
%t                         number of reachable transitions
%w                         one word accepted by the output automaton
%x, %[LETTERS]x            number of atomic propositions declared in the
                           automaton;  add LETTERS to list atomic
                           propositions with (n) no quoting, (s) occasional
                           double-quotes with C-style escape, (d)
                           double-quotes with C-style escape, (c)
                           double-quotes with CSV-style escape, (p) between
                           parentheses, any extra non-alphanumeric character
                           will be used to separate propositions
</pre>

<p>
In most tools <code>%F</code> and <code>%L</code> are the input filename and line number,
but as this makes no sense in <code>randaut</code>, these two sequences emit
numbers related to the generation of automata.
</p>

<p>
For instance let's generate 1000 random automata with 100 states and
density 0.2, and just count the number of edges in each automaton. Then
use <code>R</code> to summarize the distribution of these values:
</p>

<div class="org-src-container">

<pre class="src src-sh">randaut -e0.2 -Q100 -n1000 a --stats %e &gt; size.csv
Rscript -e <span class="org-string">"summary(read.csv('size.csv', header=FALSE, col.names='edges'))"</span>
</pre>
</div>

<pre class="example">
    edges     
Min.   :1939  
1st Qu.:2056  
Median :2083  
Mean   :2082  
3rd Qu.:2107  
Max.   :2233  
</pre>

<p>
For \(Q=100\) states and density \(D=0.2\) the expected degree of each
state is \(1+(Q-1)D = 1+99\times 0.2 = 20.8\), so the expected number of
edges should be \(20.8\times100=2080\).
</p>
</div>
</div>

<div id="outline-container-timing" class="outline-2">
<h2 id="timing"><a id="sec-7" name="sec-7"></a>Timing</h2>
<div class="outline-text-2" id="text-timing">

<p>
Two of the statistics are related to time: <code>%r</code> displays wall-clock
time, while <code>%R</code> displays CPU-time.
</p>

<div class="org-src-container">

<pre class="src src-sh">genltl --or-gf=1..8 | ltl2tgba --high --stats=<span class="org-string">'%f,%r,%R'</span>
</pre>
</div>

<pre class="example">
GFp1,0.000547617,0
GF(p1 | p2),0.00057442,0
GF(p1 | p2 | p3),0.000969184,0
GF(p1 | p2 | p3 | p4),0.00215575,0.01
GF(p1 | p2 | p3 | p4 | p5),0.0054706,0
GF(p1 | p2 | p3 | p4 | p5 | p6),0.0203182,0.02
GF(p1 | p2 | p3 | p4 | p5 | p6 | p7),0.0955506,0.1
GF(p1 | p2 | p3 | p4 | p5 | p6 | p7 | p8),0.484919,0.48
</pre>

<p>
Note that <code>%r</code> is implemented using the most precise clock available
and usually has nano-second precision, while <code>%R</code> uses the <code>times()</code>
system call (when available) and is usually only precise up to 1/100
of a second.  However, as a wall-clock time, <code>%r</code> will also be
affected by the load of the machine: if a machine is overloaded, or
swapping a lot, you may notice a wall-clock time that is significantly
higher than the CPU time measured by <code>%R</code>.
</p>

<p>
Additional arguments may be passed to <code>%R</code> to select the time that
must be output.  By default, this the CPU-time spent in both user code
and system calls.  This can be restricted using one of <code>u</code> (user) or
<code>s</code> (system).  Also by default this includes the CPU-time for the
current process and any of its children: adding <code>p</code> (parent) and <code>c</code>
(children) will show only the selected time.  Note that few tools
actually execute other processes: <a href="autfilt.html"><code>autfilt</code></a> and <a href="ltl2tgba.html"><code>ltl2tgba</code></a> can do so
when calling a SAT solver for <a href="satmin.html">SAT-based minimization</a>, and <a href="ltldo.html"><code>ltldo</code></a> will
obviously call any listed tool.  However in the case of <code>ltldo</code> the
measured time is that of executing the other tools, so the result of
<code>%[p]R</code> is likely to be always 0.
</p>

<p>
Here is an example where we use <code>ltldo</code> to benchmark the (default)
<code>--high</code> option of <code>ltl2tba</code> against the <code>--low</code> option, computing for
each option the overall wall-clock time, CPU-time spent in <code>ltldo</code>,
and CPU-time spent in <code>ltl2tgba</code>:
</p>

<div class="org-src-container">

<pre class="src src-sh">genltl --or-gf=1..8 |
ltldo <span class="org-string">'{high}ltl2tgba'</span> <span class="org-string">'{low}ltl2tgba --low'</span> --stats=<span class="org-string">'%T,%f,%r,%[p]R,%[c]R'</span>
</pre>
</div>

<pre class="example">
high,GFp1,0.0111802,0,0.01
low,GFp1,0.0108357,0,0.02
high,GFp1 | GFp2,0.0111718,0,0.01
low,GFp1 | GFp2,0.011014,0,0.01
high,GFp1 | GFp2 | GFp3,0.0120856,0,0.01
low,GFp1 | GFp2 | GFp3,0.0109632,0,0.01
high,GFp1 | GFp2 | GFp3 | GFp4,0.0135154,0,0.02
low,GFp1 | GFp2 | GFp3 | GFp4,0.0112356,0,0.02
high,GFp1 | GFp2 | GFp3 | GFp4 | GFp5,0.017224,0,0.02
low,GFp1 | GFp2 | GFp3 | GFp4 | GFp5,0.0110046,0,0
high,GFp1 | GFp2 | GFp3 | GFp4 | GFp5 | GFp6,0.0322307,0,0.04
low,GFp1 | GFp2 | GFp3 | GFp4 | GFp5 | GFp6,0.0115158,0,0.01
high,GFp1 | GFp2 | GFp3 | GFp4 | GFp5 | GFp6 | GFp7,0.107741,0,0.12
low,GFp1 | GFp2 | GFp3 | GFp4 | GFp5 | GFp6 | GFp7,0.0120181,0,0.01
high,GFp1 | GFp2 | GFp3 | GFp4 | GFp5 | GFp6 | GFp7 | GFp8,0.50086,0,0.49
low,GFp1 | GFp2 | GFp3 | GFp4 | GFp5 | GFp6 | GFp7 | GFp8,0.0121561,0,0.02
</pre>
</div>
</div>

<div id="outline-container-sec-8" class="outline-2">
<h2 id="sec-8">Naming automata</h2>
<div class="outline-text-2" id="text-8">
<p>
Automata can be given names.  This name can be output in the
HOA format, but also in GraphViz output when <code>--dot=n</code> is given.
</p>

<p>
By default, <code>ltl2tgba</code> will use the input formula as name.  Other
tools have no default name.  This name can be changed using the
<code>--name</code> option, that takes a format string similar to the one of
<code>--stats</code>.
</p>

<div class="org-src-container">

<pre class="src src-sh" id="oaut-name">ltl2tgba --name=<span class="org-string">'TGBA for %f'</span> --dot=n <span class="org-string">'a U b'</span>
</pre>
</div>


<div class="figure">
<p><img src="oaut-name.svg" alt="oaut-name.svg" />
</p>
</div>

<p>
If you have an automaton saved in the HOA format, you can extract its
name using <code>autfilt --stats=%M input.hoa</code>. The <code>%M</code> escape sequence is
replaced by the name of the input automaton.
</p>

<p>
Here is a pipeline of commands that generates five LTL formulas
\(\varphi\) such that both \(\varphi\) and \(\lnot\varphi\) are translated
into a 3-state TGBA by <a href="ltl2tgba.html"><code>ltl2tgba</code></a>.  It starts by generating an
infinite stream of random LTL formulas using <code>a</code> and <code>b</code> as atomic
propositions, then it converts these formulas as TGBA (in the HOA
format, therefore carrying the formula as name), filtering only the
TGBA with 3 states and outputting <code>!(%M)</code> (that is the negation of the
associated formula), translating the resulting formulas as TGBA, again
retaining only the names (i.e. formulas) of the automata with 3
states, and finally restricting the output to the first 5 matches
using <code>autfilt -n5</code>.
</p>

<div class="org-src-container">

<pre class="src src-sh">randltl -n -1 a b |
ltl2tgba |
autfilt --states=3 --stats=<span class="org-string">'!(%M)'</span> |
ltl2tgba |
autfilt --states=3 --stats=%M -n5
</pre>
</div>

<pre class="example">
G(b | F(b &amp; Fa))
(!a | b | (!b &amp; (b W Ga))) &amp; (a | (!b &amp; (b | (!b M F!a))))
(!a | (!a R b)) &amp; (a | (a U !b))
!a &amp; F((!a | FG!a) &amp; (a | GFa))
X(!b W a)
</pre>

<p>
Note that the above result can also be obtained without using
<code>autfilt</code> and automata names.  We can use the fact that <code>ltl2tgba
--stats</code> can output the automaton size, and that <code>ltl2tgba</code> is also
capable of <a href="csv.html">reading from a CSV file</a> (<code>-F-/2</code> instructs <code>ltl2tgba</code> to
read the standard input as if it was a CSV file, and to process its
second column):
</p>

<div class="org-src-container">

<pre class="src src-sh">randltl -n -1 a b |                 <span class="org-comment-delimiter"># </span><span class="org-comment">generate a stream of random LTL formulas</span>
ltl2tgba -F- --stats=<span class="org-string">'%s,!(%f)'</span> |   <span class="org-comment-delimiter"># </span><span class="org-comment">for each formula output "states,negated formula"</span>
grep <span class="org-string">'^3,'</span> |                        <span class="org-comment-delimiter"># </span><span class="org-comment">keep only formulas with 3 states</span>
ltl2tgba -F-/2 --stats=<span class="org-string">'%s,%f'</span> |    <span class="org-comment-delimiter"># </span><span class="org-comment">for each negated formula output "states,formula"</span>
grep <span class="org-string">'^3,'</span> |                        <span class="org-comment-delimiter"># </span><span class="org-comment">keep only negated formulas with 3 states</span>
head -n5 | cut -d, -f2              <span class="org-comment-delimiter"># </span><span class="org-comment">return the five first formulas</span>
</pre>
</div>

<pre class="example">
G(b | F(b &amp; Fa))
(!a | b | (!b &amp; (b W Ga))) &amp; (a | (!b &amp; (b | (!b M F!a))))
(!a | (!a R b)) &amp; (a | (a U !b))
!a &amp; F((!a | FG!a) &amp; (a | GFa))
X(!b W a)
</pre>

<p>
Note that the <code>-F-</code> argument in the first call to <code>ltl2tgba</code> is
superfluous as the tool default to reading from its standard input.
But we put it there for symmetry with the second call.
</p>
</div>
</div>
<div id="outline-container-sec-9" class="outline-2">
<h2 id="sec-9">Naming output</h2>
<div class="outline-text-2" id="text-9">
<p>
By default, all output is sent to standard output, so you can either
redirect it to a file, or pipe it to another program.
You can also use the <code>--output</code> (a.k.a. <code>-o</code>) option to specify a
filename where automata should be written.  The advantage over
a shell redirection, is that you may build a name using the same
escape sequences as used by <code>--stats</code> and <code>--name</code>.
</p>

<p>
For instance <code>%d</code> is replaced by 0 or 1 depending on whether the
automaton is deterministic.  We can generate 20 random automata, and
output them in two files depending on their determinism:
</p>

<div class="org-src-container">

<pre class="src src-sh">randaut -n 20 -Q2 -e1 1 -o out-det%d.hoa
autfilt -c out-det0.hoa    <span class="org-comment-delimiter"># </span><span class="org-comment">Count of non-deterministic automata</span>
autfilt -c out-det1.hoa    <span class="org-comment-delimiter"># </span><span class="org-comment">Count of deterministic automata</span>
</pre>
</div>

<pre class="example">
14
6
</pre>

<p>
If you use this feature, beware that the output filename is only
truncated once a first automaton is output to it: so if no automaton
is output for a given filename, the existing file will be left
untouched.  For instance if we run the above commands again, but
forcing <a href="randaut.html"><code>randaut</code></a> to output 20 <b>deterministic</b> automata, it may look
like we produced more than 20 automata:
</p>

<div class="org-src-container">

<pre class="src src-sh">randaut -D -n 20 -Q2 -e1 1 -o out-det%d.hoa
autfilt -c out-det0.hoa    <span class="org-comment-delimiter"># </span><span class="org-comment">Count of non-deterministic automata</span>
autfilt -c out-det1.hoa    <span class="org-comment-delimiter"># </span><span class="org-comment">Count of deterministic automata</span>
</pre>
</div>

<pre class="example">
14
20
</pre>

<p>
This is because the <code>out-det0.hoa</code> file hasn't changed from the
previous execution, while <code>out-det1.hoa</code> has been overwritten.
</p>

<p>
In the case where you want to append to a file instead of overwriting
it, prefix the output filename with <code>&gt;&gt;</code> as in
</p>

<pre class="example">
randaut -D -n 20 -Q2 1 -o '&gt;&gt;out-det%d.hoa'
</pre>

<p>
(You need the quotes so that the shell does not interpret <code>&gt;&gt;</code>.)
</p>
</div>
</div>
</div>
</body>
</html>
